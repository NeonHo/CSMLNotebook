# 1. Layered Architecture
- Internet is the most complicated system.
- 模块化、分层化
	- 大问题分解若干个子问题
		- 从而实现对复杂系统进行简化。
		- 每层各自实现一组单一的功能
	- new tech switch 对上层透明
		- Making it much easier to change the implementation of the service provided by the layer.
		- As long as the layer provides the same service to the layer above it, and uses the same services from the layer below it, the remainder of the system remains unchanged when a layer’s implementation is changed.
## 1.1. Service
- 低层实体向上层实体提供的通信能力
	- 服务用户 service user
	- 服务提供者 service provider
	- 服务访问点 SAP service access point
		- 服务提供者用于区分不同的上层用户的信息。
			- e.g. 套接字
### 1.1.1. primitive (原语)
服务提供者为服务用户提供的服务所采用的形式.
- Socket API : 传输层 向 应用层 提供的服务
- 上层服务用户访问下层服务提供者所调用的函数
	- 这些函数对于用户来说是不可再份的。
### 1.1.2. 面向连接的服务 connection-oriented
- 用户之间通信前要握手
- 为后续的继续通信做准备
- e.g. TCP
### 1.1.3. 无连接的服务 
## 1.2. functionality & service
- 功能再强大不能被用就没有用。
- 通过层间接口，功能只有能够被调用于为上层提供服务才有意义。
- 对等层的协议实体通过交换PDU实现功能([[1.1 Internet#4. 网络协议]])：
	- 通过调用接口访问下层提供的服务
	- 进行：
		- 本地信息处理
		- 对等层信息交换
		- 协议指定的动作
	- 实现更为复杂的功能，从而为上层提供更复杂更新的服务。
## 1.2. protocol
- 不同层的协议是平行的，对等层的协议实体进行信息交换。
- 协议的实现是通过下层的协议才能实现；
- 协议的目的是向上层提供更好的协议。





	- communication using the below services from the below layer
	- the set of rules the current layer need to obey during actions.
	- Each layer will generate some new services when communicating with the equal layer.
	- To realize the communication of the current layer, we use the service below.
	- The goal of the current layer is to provide the better services.
- Protocol is horizon
- Service is vertical
	- 
		- socket
		- TCP provide service to specify the corresponding app
		- 
		- 
			- handshake
			- prepare for communication
		- connectionless service
			- UDP
- DU data unit
	- SDU the up layer give to the below layer for transmission
	- PDU = SDU from up layer (may divide into segmentations optionally / or combined into one data) + Header which contains Interface Control Information (ICI) from current layer
	- application: message
	- transport: segment
	- Net: packet 分组 / datagram IP 数据报
	- Link: frame
	- Physical: bit
- Internet Protocol Stack
	- 物理层(网卡)
		- 上层传入 frame
		- 转换 电光信号，承载在媒体上，传输到另一端
	- 链路层（网卡）
		- 以 frame 为单位传输
		- 相邻两结点之间传输 point to point
		- PPP，Wi-Fi，Ethernet
	- 网络层
		- 源到目标主机之间传输 end to end
		- 以分组 package 为单位
		- IP 路由协议
	- 传输层
		- 进程到进程之间传输，对于每个主机内部进行区分
		- 向上提供的应用报文不可靠变可靠 改正：乱、错、丢
		- TCP UDP 
	- ISO/OSI 表示层
	- ISO/OSI 会话层
	 - 应用层
		- FTP, SMTP, HTTP, DNS
		- 可以包括表示层和会话层
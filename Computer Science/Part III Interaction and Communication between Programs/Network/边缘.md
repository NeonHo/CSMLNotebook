# 网络结构

- 目的：实现端之间的数据的交换
- 边缘 edge
	- 边缘上的应用是网络存在的理由
	- 边缘端之间交换报文
	- 主从模式 CS模式
		- 主：服务器先启动，等待请求（被动）
		- 从：客户端再启动，主动发出请求
		- 可扩展性差（随着客户端增多，性能下降。）
	- P2P 模式
		- 每个节点既是客户端，又是服务器。
		- 客户端增多的同时，服务器也随之增多。（迅雷文件分发）
		- 分布式载荷
	- 基础设施服务方式
		- 面向连接
			- 两个应用进程打招呼
			- 互相为对方分配相应资源
			- 控制变量准备
			- 网络不知道，只有端系统知道
			- 原原本本发送（错、丢、重复、失序）
				- TCP 要有缓存，保证能重传
				- 发送报文编号
				- 损耗时间空间资源
				- 端之间性能差异过大，需要做流量控制
				- 因为数据链路复用，网络路径的通行能力受限时，能做拥塞控制
				- HTTP web
				- FTP file
				- Telnet remote login
				- SMTP e-mail
		- 有连接
			- 端和网络都知道要准备好
		- 无连接
			- UDP
				- 直接发送，不打招呼
				- 不可靠，丢包就丢包
				- 无需时间代价
				- 适合实时应用
				- 适合事务性应用
- 核心 core
	- 作用
		- 路由（路由实体算出路由表）
		- 转发 路由器将分组根据路由表转发到不同的链路
	- 连到所有的边缘端
	- 让任意端间进行通信
	- 全球端之间的链路切换开关
	- 作用：数据交换
		- 实现：
			- 电路交换：固定电话
				- 通过信令系统建立连接
				- 线路被分为多个 pieces
					- 频分
					- 时分
					- 波分
					- 每个用户只占用一条线路中的一个 piece
					- 传输时长：
						- 连接建立时长
						- 传输时间：一个文件传输到链路上到时间
							- 一个比特的传输时间是带宽分之一
						- 传播延迟：路程/光速 的物理传播时间。
				- 多个线路组成独享的线路
				- 分配了如果没数据发送，就是资源浪费。
				- 带宽有保障（独享的优点）
				- 需要线路建立时间
				- 不适合计算机间通信
					- 计算机通信具有突发性
					- 不可靠，一个结点断了，大家都可能断。
			- 分组交换
				- 每一跳使用带宽的全部
				- 分组为单位
				- 每一跳都是以分组 package 为单位存储转发
					- 将整个分组全存下来再转
					- 防止我们整条链路只能供两端专用，而不能给别人用。
					- 这意味着每个交换结点要有一个整个分组的存储时间。
					- 但是换取了共享性，把链路的每一个跳都让出来。
						- 同样的网络资源，支持同时活跃的用户更多。
						- 但是流媒体应用更希望有线路交换这样的特性
					- 但是每心来一个分组，就要在结点的队列后面等，等到轮到他才能转发。
						- 排队延迟
						- 丢失：如果输出队列等缓存空间是有限制的，到来的分组将被抛弃
				- 实际上也是一种时分复用
					- 统计多路复用
					- 在什么时间段给谁传分组是由排队随机确定的。
				- 方式：
					- 数据报
						- 目标主机完整地址携带
						- datagram 可能走不同的路径（路由计算）
					- 虚电路 virtual circuit
						- 握手保持通信状态
						- 靠信令建立线路
						- 建立网络层的连接
						- 按照虚电路号存储转发
- 接入 access
	- 边缘主机接入核心
- 服务角度
	- 分布式应用
	- 基础设施（为应用提供服务）
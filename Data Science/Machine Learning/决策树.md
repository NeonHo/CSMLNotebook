
决策树是一种直观、易于解释的机器学习算法，广泛应用于分类和回归任务。它通过模拟人类“逐步决策”的过程，将数据按照特征的不同取值划分为不同分支，最终形成一棵“树状结构”，每个叶子节点对应一个决策结果（分类标签或回归值）。

### **一、决策树的基本结构**  
决策树由三类节点组成：  
- **根节点**：整个树的起点，包含所有样本。  
- **内部节点**：每个内部节点对应一个“特征判断”（如“年龄是否>30岁”“收入是否>5000元”），根据特征取值将样本分配到不同分支。  
- **叶子节点**：树的终点，每个叶子节点对应一个最终决策结果（如“分类：购买”“回归：房价=150万”）。  

例如，用“年龄”“收入”预测“是否购买商品”的决策树可能如下：  
```
根节点：年龄 > 30岁？  
├─ 是 → 内部节点：收入 > 5000元？  
│  ├─ 是 → 叶子节点：购买  
│  └─ 否 → 叶子节点：不购买  
└─ 否 → 叶子节点：不购买  
```

### **二、决策树的核心：如何选择“分裂特征”？**  
决策树的关键是**在每个节点选择最优特征进行分裂**，目标是让分裂后的子节点“纯度更高”（即样本类别更集中，分类任务）或“方差更小”（回归任务）。  

#### 1. 分类决策树：以“纯度提升”为目标  
常用分裂准则：  
- **信息熵（Entropy）与信息增益（Information Gain）**：  
  - 信息熵衡量样本集合的混乱程度（纯度），熵值越低，纯度越高（如全为同一类别的集合熵为0）。  
  - 信息增益 = 父节点熵 - 子节点熵的加权平均，**增益越大，分裂后纯度提升越明显**，因此优先选择信息增益最大的特征。  [[信息熵与信息增益]]
- **基尼系数（Gini Index）**：  
  衡量样本被随机分类到错误类别的概率，取值范围`[0, 0.5]`，值越小纯度越高。分裂时选择“基尼系数下降最多”的特征（计算效率高于信息熵，是CART分类树的默认准则）。  

#### 2. 回归决策树：以“方差减小”为目标  
回归任务中，分裂的目标是让子节点的样本标签（数值）更集中（方差更小）。常用准则：  
- **均方误差（MSE）**：分裂后子节点MSE的加权和越小，分裂效果越好。  

### **三、决策树的优点**  
1. **可解释性强**：树结构直观，能清晰看到“哪些特征影响决策”以及“决策逻辑”（如“年龄>30且收入>5000→购买”）。  
2. **无需特征预处理**：对特征的尺度（如是否标准化）、分布（如是否正态）不敏感，可直接处理类别型或数值型特征。  
3. **训练效率高**：通过贪心策略（每次选局部最优特征）构建树，计算成本较低。  
4. **抗噪性较强**：对异常值不敏感（但过度复杂的树可能过拟合异常值）。  

### **四、决策树的缺点与改进**  
1. **容易过拟合**：完全生长的树可能过度拟合训练数据（如捕捉噪声），导致泛化能力差。  
   - 改进：剪枝（预剪枝：提前停止树生长；后剪枝：删除冗余分支）、控制树的深度/叶子节点数量。  
2. **对数据敏感**：训练数据微小变动可能导致树结构大幅变化（稳定性差）。  
   - 改进：集成学习（如随机森林、GBDT），通过多棵树的投票/加权降低单棵树的不稳定性。  
3. **偏爱多取值特征**：在信息增益准则下，取值多的特征（如ID类特征）可能被优先选择，但实际意义不大。  
   - 改进：使用信息增益率（C4.5算法），对多取值特征进行惩罚。  

### **五、经典决策树算法**  
| 算法       | 适用任务 | 分裂准则               | 树结构       |  
|------------|----------|------------------------|--------------|  
| ID3        | 分类     | 信息增益               | 多叉树（特征取值数=分支数） |  
| C4.5       | 分类     | 信息增益率（改进ID3）   | 多叉树       |  
| CART       | 分类/回归 | 基尼系数（分类）、MSE（回归） | 二叉树（每次分裂为2个分支） |  

### **六、应用场景**  
决策树适合需要“清晰解释决策逻辑”的场景，例如：  
- 金融风控（如“是否批准贷款”，需向客户解释拒绝原因）；  
- 医疗诊断（如“是否患病”，需医生理解判断依据）；  
- 客户分层（如“高价值客户识别”，便于业务部门理解规则）。  

总之，决策树是一种“简单但强大”的算法，其核心优势在于可解释性，而通过剪枝或集成学习能进一步提升其性能，使其在实际业务中被广泛使用。

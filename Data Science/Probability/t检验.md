t检验（t-test）是一种基于[[t分布]]的统计假设检验方法，主要用于在样本量较小、总体标准差未知的情况下，检验总体均值是否存在显著差异。它广泛应用于医学、生物学、社会科学等领域，是数据分析中最基础的假设检验方法之一。


### **一、t检验的核心思想**
t检验的核心是通过计算**t统计量**，衡量样本数据与“总体均值无差异”这一假设的偏离程度，再根据t分布判断该偏离是否由随机误差导致。其本质是解决以下问题：  
- 样本均值与总体均值的差异是否显著？  
- 两组样本的均值差异是否显著？  


### **二、t分布的背景**
t分布由英国统计学家威廉·戈塞特（William Gosset）于1908年提出（笔名“Student”），故又称“学生t分布”，用于小样本（通常样本量n<30）的统计推断。  

- **与[[正态分布]]的关系**：当样本量增大（n→∞）时，t分布趋近于标准正态分布（Z分布）；样本量越小，t分布的尾部越“厚”（即极端值出现的概率更高）。  
- **自由度（df）**：t分布的形状由自由度决定，计算公式为$df = n - 1$（[[单样本t检验]]）或$df = n1 + n2 - 2$（两独立样本t检验，等方差假设）。


### **三、t检验的基本步骤**
所有t检验均遵循假设检验的统一框架，步骤如下：  

1. **提出假设**  
   - 原假设（H₀）：通常假设“无差异”，例如$H₀: μ = μ₀$（单样本）或$H₀: μ₁ = μ₂$（两样本）。  
   - 备择假设（H₁）：根据研究目的选择单侧或双侧检验：  
     - 双侧检验：$H₁: μ ≠ μ₀$（或$μ₁ ≠ μ₂$），即差异存在但不指定方向。  
     - 单侧检验：$H₁: μ > μ₀$（或$μ₁ > μ₂$）或$H₁: μ < μ₀$（或$μ₁ < μ₂$），即指定差异方向。  

2. **计算t统计量**  
   根据t检验的类型（单样本、两独立样本、配对样本），使用不同公式计算t值。  

3. **确定显著性水平（α）**  
   通常取α=0.05（即5%的显著性水平），表示“拒绝正确原假设”的最大容忍概率。  

4. **计算P值或临界值**  
   - P值：在H₀成立的前提下，观测到当前或更极端t统计量的概率。  
   - 临界值：根据α和自由度，从t分布表中查得的阈值。  

5. **做出结论**  
   - 若P值 < α（或|t统计量| > 临界值），则拒绝H₀，认为差异显著。  
   - 若P值 ≥ α（或|t统计量| ≤ 临界值），则不拒绝H₀，即尚无足够证据证明差异存在。  


### **四、常见t检验类型及公式**

#### **1. 单样本t检验**  
用于检验“单个样本的均值是否与已知总体均值（μ₀）存在显著差异”，前提是样本来自正态分布总体。  

- **t统计量公式**：  
  $$
  t = \frac{\bar{x} - \mu_0}{s / \sqrt{n}}
  $$  
  其中：  
  - $\bar{x}$ 为样本均值，  
  - $\mu_0$ 为已知总体均值，  
  - $s$ 为样本标准差，  
  - $n$ 为样本量。  


#### **2. 两独立样本t检验**  
用于检验“两个独立群体的总体均值是否存在显著差异”，前提是：  
- 两组数据均来自正态分布总体；  
- 两组总体方差相等（等方差假设）或不等（Welch校正）。  

- **等方差假设下的t统计量**：  
  $$
  t = \frac{\bar{x}_1 - \bar{x}_2}{s_p \cdot \sqrt{\frac{1}{n_1} + \frac{1}{n_2}}}
  $$  
  其中，$s_p$ 为合并标准差：  
  $$
  s_p = \sqrt{\frac{(n_1 - 1)s_1^2 + (n_2 - 1)s_2^2}{n_1 + n_2 - 2}}
  $$  

- **异方差假设（Welch检验）**：  
  若两组方差不等，需用Welch校正公式计算t统计量和自由度，公式更复杂（通常由软件直接输出）。  


#### **3. 配对样本t检验**  
用于检验“配对数据的均值差异是否显著”（如同一组样本处理前后的对比），核心是将配对数据转化为“差异值”，再检验差异的均值是否为0。  

- **步骤**：  
  1. 计算每对数据的差异：$d_i = x_{1i} - x_{2i}$（如处理后 - 处理前）。  
  2. 检验差异的总体均值是否为0，即$H₀: μ_d = 0$。  

- **t统计量公式**：  
  $$
  t = \frac{\bar{d} - 0}{s_d / \sqrt{n}}
  $$  
  其中：  
  - $\bar{d}$ 为差异值的样本均值，  
  - $s_d$ 为差异值的样本标准差，  
  - $n$ 为配对样本的数量。  


### **五、t检验的注意事项**  
1. **数据正态性**：t检验对偏离正态分布较为敏感，小样本时需通过Shapiro-Wilk检验或Q-Q图验证正态性；若严重偏离，可改用非参数检验（如Wilcoxon检验）。  
2. **样本独立性**：两独立样本t检验要求两组数据相互独立（如不同群体），配对样本t检验则要求数据成对关联（如同一群体的重复测量）。  
3. **方差齐性**：两独立样本t检验需先通过Levene检验判断方差是否齐性，若不齐，建议使用Welch校正或非参数检验。  
4. **样本量**：当样本量较大（n≥30）时，t检验与Z检验结果接近，可近似用Z检验替代。  


### **六、应用示例**  
假设某班学生的数学平均成绩为80分，随机抽取10名学生进行额外辅导后，成绩为82, 85, 78, 90, 88, 83, 79, 86, 87, 81。检验辅导是否显著提高成绩（α=0.05）：  

1. 假设：$H₀: μ = 80$，$H₁: μ > 80$（单侧检验）。  
2. 计算：样本均值$\bar{x}=84.1$，样本标准差$s=4.27$，$n=10$。  
   $$
   t = \frac{84.1 - 80}{4.27 / \sqrt{10}} \approx 3.02
   $$  
3. 自由度$df=9$，单侧临界值$t₀.₀₅=1.833$。  
4. 结论：$t=3.02 > 1.833$，故拒绝$H₀$，即辅导显著提高了成绩$（P<0.05）$。  


t检验通过量化“差异”与“随机误差”的比例，为科学结论提供了统计依据，是数据分析中不可或缺的工具。